<% count ||= WantToWatchItem.where(item_id: @item.id).count %>

<% if WantToWatchItem.find_by(user_id: current_user&.id, item_id: @item.id) %>
  <%= link_to "/want_to_watch_items/#{@item.id}?count=#{count}", method: "delete", remote: true do %>
    <span class="fa fa-heart like-btn-unlike">観たい！<%= count %></span>
  <% end %>
<% else %>
  <%= link_to "/want_to_watch_items?item_id=#{@item.id}&count=#{count}", method: "post", remote: true do %>
    <span class="fa fa-heart like-btn">観たい！<%= count unless count.zero? %></span>
  <% end %>
<% end %>
